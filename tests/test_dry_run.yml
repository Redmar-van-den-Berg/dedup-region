- name: dry-run-vanilla
  tags:
    - dry-run
  command: >
    snakemake
      --dryrun
      --reason
      --printshellcmds
      --config pepfile=tests/pep/project_config.yaml
      --snakefile Snakefile
  exit_code: 0
  stdout:
    contains:
      - "sample1/umi-trie/forward_dedup.fastq.gz"
      - "sample2/umi-trie/forward_dedup.fastq.gz"
      - "sample1/regions/sample1.bam"
      - "sample1/regions/sample1.dedup.bam"
      - "transcripts/ENST00000361851/sample1.before.cov"
      - "transcripts/ENST00000361851/sample1.before.avg.cov"
      - "transcripts/ENST00000361851/sample1.after.cov"
      - "transcripts/ENST00000361851/sample1.after.avg.cov"
      - "transcripts/ENST00000387461/sample1.before.cov"
      - "transcripts/ENST00000387461/sample1.before.avg.cov"
      - "transcripts/ENST00000361851/sample2.before.cov"

- name: dry-run-subsamples
  tags:
    - dry-run
  command: >
    snakemake
      --dryrun
      --reason
      --printshellcmds
      --config pepfile=tests/pep/project_subsamples.yaml
      --snakefile Snakefile
  exit_code: 0
  stdout:
    contains:
      - "tests/data/micro_R2.fq.gz tests/data/micro_R2.fq.gz" 
